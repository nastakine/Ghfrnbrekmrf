!function(d){"use strict";d.views&&(d.views.tags({validation:{init:function(){this.childValidates=[],null!=this.tagCtx.props.initialValue&&(this.isValid=this.tagCtx.props.initialValue)},validate:function(){for(var e=this.childValidates.length,t=!0;e--&&!1!==t;)t=this.childValidates[e].validate();if(t){var i=this.childTags("validation");if(0<(null==i?void 0:i.length))for(const a of i.map(e=>e.childValidates).reduce((e,t)=>e.concat(t),[]))if(!1===(t=a.validate()))break}return t},clearMessage:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].clearMessage()},refreshValidates:function(){for(var e=this.childValidates.length;e--;)this.childValidates[e].refresh()},addChild:function(e){this.childValidates.push(e)},removeChild:function(e){for(var t=this.childValidates.length;t--;)if(this.childValidates[t]===e){this.childValidates.splice(t,1),this.updateIsValid();break}},onChildValidate:function(){this.updateIsValid()},updateIsValid:function(){for(var e=!0,t=this.childValidates.length;t--;)if(!this.childValidates[t].isValid&&!this.childValidates[t].tagCtx.props.preventValidation){e=!1;break}d.observable(this).setProperty("isValid",e)},showError:function(e){var t=document.querySelector(this.tagCtx.props.errorPlacement);null!=t.textContent?t.textContent=e:t.innerText=e,d.observable(this).setProperty("isValid",!1)},showDictionaryErrors:function(a,n){var e=Object.keys(a);1==e.length&&""==e[0]?wb.popup.renderModalError(a[""][0]):(e.forEach(function(e){var t=(n||"")+e,i=(i=document.querySelector('[for="'+t+'"]:not(label)'))||document.querySelector('[data-valmsg-for="'+t+'"]:not(label)'),t=document.querySelector('[name="'+t+'"]');null!=t&&t.classList.add("input-validation-error"),null!=i.textContent?i.textContent=a[e]:i.innerText=a[e],i.classList.add("field-validation-error")}),d.observable(this).setProperty("isValid",!1))},isValid:!0,dataBoundOnly:!0},validate:{baseTag:"radiogroup",linkedElement:"select,textarea,input",boundProps:["preventInvalidData"],init:function(e,t){var i=this;(i.radiogroup=e.props.radiogroup)?i.baseApply(arguments):i.inline&&!e.content&&(i.template="<input/>"),i.validationGroup=this.parents.validation,i.validationGroup&&i.validationGroup.addChild(this)},render:function(e){var t=this.tagCtx;if(this.inline)return t=t.render(t.view,!0),this.radiogroup?"<div>"+t+"</div>":t},onBind:function(e,t){var i,a=this,n=a.linkedElem&&a.linkedElem[0];(i=a.childTags()[0])&&(a.targetTag=i,n&&d.view(n).tag===i&&(a.linkedElem=void 0),i.onBeforeUpdateVal=function(e,t){return a.onBeforeUpdateVal.call(a,e,t)}),a.radiogroup&&this.baseApply(arguments)},onAfterLink:function(e,t){var i=this,a=i.targetTag,n=e.props,l=i.cvtArgs()[0];void 0!==n.preventInvalidData?i.preventInvalidData=n.preventInvalidData:i.parents.validation&&(i.preventInvalidData=i.parents.validation.tagCtx.props.preventInvalidData),i.messageElem&&i.messageElem.parentNode||(i.radiogroup?(i.messageElem=i.inline?e.contents("div"):d(t.elem),i.messageElem[0].classList.add("radiogroup")):(!i.inline&&(a=d.views.sub._glt(t.elem)[0])&&(i.targetTag=a),i.messageElem=a&&(a.displayElem||a.linkedElem||a.mainElem)||i.displayElem||i.linkedElem),i.messageElem[0].classList.add("val-msg")),i.label&&i.label.parentNode||(n.errorPlacement?i.label=d(n.errorPlacement)[0]:i.label=d('<label class="error"></label><br/>').insertAfter(i.messageElem)[0]),n.preventValidation||i.validate(l)},onUpdate:function(e,t,i){return this.clearMessage(),!1},onBeforeUpdateVal:function(e,t){if(this.preventInvalidData)return this.validate(t.value),this.isValid},onDispose:function(){this.validationGroup&&this.validationGroup.removeChild(this)},validate:function(e){var t,i,a=this,n=a.tagCtx.props,l=a.linkedElem;void 0===e&&(a._.radio&&l?l=l.find("input:checked"):n.radiogroup&&(l=l&&l.filter(":checked")),e="",(l=l&&l[0])?e="checkbox"===l.type?l.checked:l.value:a.targetTag&&(e=a.targetTag.bndArgs()[0]),e=e||""),a.clearMessage();let s=!0;for(i in this.validators){var r=n[i],o=n&&n.preventValidation||!1;if(void 0!==r&&!o&&this.validators[i].test(r,e)){t=i,s=!1;break}}return s||(l=n["msg_"+t]||this.validators[t].message,l=(l=d.isFunction(l)?l(r,e):l).replace(/%cond%/g,r).replace(/%val%/g,e),void 0!==a.label.textContent?a.label.textContent=l:a.label.innerText=l,a.messageElem[0].classList.add("input-validation-error"),a.label.classList.remove("field-validation-valid"),a.label.classList.add("field-validation-error")),d.observable(this).setProperty("isValid",s),this.validationGroup&&this.validationGroup.onChildValidate(),this.isValid},validators:function(e){for(var t in e)this.validators[t]=e[t]},clearMessage:function(){var e=this.label;this.messageElem&&(this.messageElem[0].classList.remove("input-validation-error"),e.classList.remove("field-validation-error"),void 0!==e.textContent?e.textContent="":e.innerText="")}}}),d.views.tags.validate.validators({required:{message:"Please provide a value",test:function(e,t){return e&&""===t}},equal:{message:"Value must be %cond%",test:function(e,t){return t!==""+e}},checked:{message:function(e,t){return"Must be "+(e?"checked":"unchecked")},test:function(e,t){return(t&&"false"!==t)!==e}},min:{message:"Minimum: %cond%",test:function(e,t){return t<e}},max:{message:"Maximum:  %cond%",test:function(e,t){return e<t}},maxLength:{message:"Maximum length: %cond%",test:function(e,t){return t.length>e}},minLength:{message:"Minimum length: %cond%",test:function(e,t){return t.length<e}},regex:{message:"Invalid string format",test:function(e,t){return!(""===t||!t)&&(e=e.test?e:new RegExp(e),!(e=t.match(e))||0<e.index||(null==(e=e[0])?void 0:e.length)<t.length)}}}))}(this.jQuery);